= Trac Installation Guide = 
[[TracGuideToc]]

Trac is a lightweight project management tool that is implemented as a web-based application. Trac is  written in the Python programming language and needs a database (either [http://sqlite.org/ SQLite], [http://www.postgresql.org/ PostgreSQL], or [http://mysql.com/ MySQL] works). For HTML rendering, Trac uses the [http://genshi.edgewall.org Genshi] templating system.

Some plugins might still require the previously used templating system, [http://www.clearsilver.net/ ClearSilver] which is therefore still supported, but no longer mandatory.

What follows are generic instructions for installing and setting up Trac and its requirements. While you can find instructions for installing Trac on specific systems at TracInstallPlatforms on the main Trac site, please be sure to '''first read through these general instructions''' to get a good understanding of the tasks involved.

== Requirements ==

To install Trac, the following software packages must be installed:

 * [http://www.python.org/ Python], version >= 2.3
   * if using mod_python together with xml-related things (like 0.11, or xml-rpc plugin), use python-2.5. expat is namespaced there and does not cause apache to crash any more(see [http://www.dscpl.com.au/wiki/ModPython/Articles/ExpatCausingApacheCrash here] for details).
   * [http://peak.telecommunity.com/DevCenter/setuptools setuptools], version >= 0.6
   * [http://genshi.edgewall.org/wiki/Download Genshi], version >= 0.4.1
   * For RPM-based systems you might also need the `python-devel` and `python-xml` packages.
 * You also need a database system and the corresponding python drivers for it.
   The database can be either SQLite, PostgreSQL or ''MySQL (experimental)''.
 * [http://www.clearsilver.net/ ClearSilver], version >= 0.9.3
   * With python-bindings (`./configure --with-python=/usr/bin/python`)
   * Version 10.4 required for Python 2.5
   * Please make sure to get at least ClearSilver 10.4 if you have Python 2.5.
     ClearSilver up to 10.3 and Python 2.5 don't seem to get along, so you'll probably have more luck with Python 2.4.  Note about it in [http://www.mail-archive.com/trac-dev@googlegroups.com/msg00034.html this mail exchange]. 
   * You can fix the problem with Python 2.5 (x_64) relatively easily because Clearsilver installed neo_cgi.so in the path /usr/lib/python2.5/site-packages instead of /usr/lib64/python2.5/site-packages. To solve the problem, make a link in /usr/lib64/python2.5/site-packages with ''ln -s /usr/lib/python2.5/site-packages/neo_cgi.so neo_cgi.so'' or just move the file to the correct location.[[br]] -- !KarlHeinzMarbaise
  * For '''OS X 10.5''' ('''Leopard''') make a link:[[br]]
    ''sudo ln -s /urs/lib/python2.5/site-packages/neo-cgi.so /Library/Python/2.5/site-packages''[[br]]
    after you install clearsilver.[[br]] -- Samvel

=== For SQLite ===

 * [http://www.sqlite.org/ SQLite], version 3.3.4 and above preferred.
 * [http://pysqlite.org/ PySQLite], version 1.x (for SQLite 2.x) or version 2.x (for SQLite 3.x), version 2.3.2 preferred. For details see trac:PySqlite

''Note: Users of Mac OS X please take care; the Apple-supplied SQLite contains additional code to support file locking on network filesystems like AFP or SMB. This is not presently (3.3.6) in the mainline sources, so if you build your own SQLite from source it will not function correctly on such filesystems - typically it gives the error "{{{database is locked}}}". [http://www.alastairs-place.net/2006/07/sqlite_and_mac/ A patch] is available for version 3.3.6, based on Apple's code, otherwise you're probably best off using the Apple supplied version (presently 3.1.3).''

=== For PostgreSQL ===

 * [http://www.postgresql.org/ PostgreSQL]
 * [http://initd.org/projects/psycopg2 psycopg2] (preferred) or [http://pypgsql.sourceforge.net/ pyPgSQL] (but see #5096)

''Note: PostgreSQL support requires Trac version 0.9 or later.''

=== For MySQL ===

'''Warning''': MySQL support is currently ''still'' experimental. That means it works for some people, but several issues remain, in particular regarding the use of unicode and the key length in the repository cache. 
See trac:MySqlDb for more detailed informations.

 * [http://mysql.com/ MySQL], version 4.1 or later
 * [http://sf.net/projects/mysql-python MySQLdb], version 1.2.1 or later

''Note: MySQL support requires Trac version 0.10 or later.''

=== Optional Requirements ===

==== Version Control System ====

'''Please note:''' if using Subversion, Trac must be installed on the '''same machine'''. Remote repositories are not currently supported.

 * [http://subversion.tigris.org/ Subversion], version >= 1.0. (versions recommended: 1.2.4, 1.3.2 or 1.4.0) and the '''''corresponding''''' Python bindings. For troubleshooting, check trac:TracSubversion
   * Trac uses the [http://svnbook.red-bean.com/svnbook-1.1/ch08s02.html#svn-ch-8-sect-2.3 SWIG] bindings included in the Subversion distribution, '''not''' [http://pysvn.tigris.org/ PySVN] (which is sometimes confused with the standard SWIG bindings).
   * If Subversion was already installed without the SWIG bindings, on Unix you'll need to re-`configure` Subversion and `make swig-py`, `make install-swig-py`.
   * There are [http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=91 pre-compiled bindings] available for win32. 
 * Support for other version control systems is provided via third-parties. See PluginList and VersioningSystemBackend.

==== Web Server ====
 * A CGI-capable web server (see TracCgi), or
 * a [http://www.fastcgi.com/ FastCGI]-capable web server (see TracFastCgi), or
 * [http://httpd.apache.org/ Apache] with [http://www.modpython.org/ mod_python 3.1.3+] (see TracModPython)
    * When installing mod_python the development versions of Python and Apache are required (actually the libraries and header files)
 * [http://httpd.apache.org/ Apache] with [http://code.google.com/p/modwsgi/ mod_wsgi] (see [trac:wiki:TracModWSGI])
    * While mod_wsgi is very new and somewhat experimental, this should work with Apache 1.3, 2.0 or 2.2 and promises to deliver more performance than using mod_python.


==== Other Python Utilities ====
 * [http://peak.telecommunity.com/DevCenter/setuptools setuptools], version >= 0.6 for using plugins (see TracPlugins)
   * ''No longer optional starting with 0.11dev''
 * [http://docutils.sourceforge.net/ docutils], version >= 0.3.9 for WikiRestructuredText.
 * [http://silvercity.sourceforge.net/ SilverCity] and/or [http://www.gnu.org/software/enscript/enscript.html Enscript] for [wiki:TracSyntaxColoring syntax highlighting].
    * Note that !SilverCity 0.9.6 has a [http://sourceforge.net/tracker/index.php?func=detail&aid=1424436&group_id=45693&atid=443739 bug] that breaks Python syntax highlighting in Trac. Until an update is made available, we recommend using version 0.9.5.
    * Note that !SilverCity 0.9.7 marks the bug listed above - Fixed!

'''Attention''': The various available versions of these dependencies are not necessarily interchangable, so please pay attention to the version numbers above. If you are having trouble getting Trac to work please double-check all the dependencies before asking for help on the MailingList or IrcChannel.

Please refer to the documentation of these packages to find out how they are best installed. In addition, most of the [wiki:TracInstallPlatforms platform-specific instructions] also describe the installation of the dependencies. Keep in mind however that the information there ''probably concern older versions of Trac than the one you're installing'' (there are even some pages that are still talking about Trac 0.8!).

== Installing Trac ==

Like most Python programs, the Trac Python package is installed by running the following command at the top of the source directory (you must issue this command from the source directory; the installation will not work properly if you run setup.py from a different directory) :
{{{
$ python ./setup.py install
}}}

''Note: you'll need root permissions or equivalent for this step.''

This will byte-compile the python source code and install it in the `site-packages` directory
of your Python installation. The directories `cgi-bin`, `templates`, `htdocs`, `wiki-default` and `wiki-macros` are all copied to `$prefix/share/trac/`. `conf` and `plugins` stub directories are also created under `$prefix/share/trac/` (''since [milestone:0.10]'').

The script will also install the [wiki:TracAdmin trac-admin] command-line tool, used to create and maintain [wiki:TracEnvironment project environments], as well as the [wiki:TracStandalone tracd] standalone server.

=== Advanced Options ===

To install Trac to a custom location, or find out about other advanced installation options, run:
{{{
$ python ./setup.py install --help
}}}

Also see [http://docs.python.org/inst/inst.html Installing Python Modules] for detailed information.

Specifically, you might be interested in:
{{{
$ python ./setup.py install --prefix=/path/to/installdir
}}}

== Creating a Project Environment ==

A [wiki:TracEnvironment Trac environment] is the backend storage where Trac stores information like wiki pages, tickets, reports, settings, etc. An environment is basically a directory that contains a human-readable configuration file and various other files and directories.

A new environment is created using [wiki:TracAdmin trac-admin]:
{{{
$ trac-admin /path/to/myproject initenv
}}}

[wiki:TracAdmin trac-admin] will prompt you for the information it needs to create the environment, such as the name of the project, the type and the path to an existing [wiki:TracEnvironment#SourceCodeRepository source code repository], the [wiki:TracEnvironment#DatabaseConnectionStrings database connection string], and so on. If you're not sure what to specify for one of these options, just leave it blank to use the default value. The database connection string in particular will always work as long as you have SQLite installed. Leaving the path to the source code repository empty will disable any functionality related to version control, but you can always add that back when the basic system is running.

Also note that the values you specify here can be changed later by directly editing the [wiki:TracIni] configuration file.

''Note: The user account under which the web server runs will require write permissions to the environment
directory and all the files inside.''


== Running the Standalone Server ==

After having created a Trac environment, you can easily try the web interface by running the standalone server [wiki:TracStandalone tracd]:
{{{
$ tracd --port 8000 /path/to/myproject
}}}

Then, fire up a browser and visit `http://localhost:8000/`. You should get a simple listing of all environments that tracd knows about. Follow the link to the environment you just created, and you should see Trac in action.


== Running Trac on a Web Server ==

Trac provides four options for connecting to a “real” web server: [wiki:TracCgi CGI], [wiki:TracFastCgi FastCGI], [wiki:TracModWSGI mod_wsgi] and [wiki:TracModPython mod_python]. For decent performance, it is recommended that you use either mod_wsgi, FastCGI or mod_python.

== Configuring Authentication ==

The process of adding, removing, and configuring user accounts for authentication depends on the specific way you run Trac. The basic procedure is described in the [wiki:TracCgi#AddingAuthentication "Adding Authentication"] section on the TracCgi page. To learn how to setup authentication for the frontend you're using, please refer to one of the following pages:

 * TracStandalone if you use the standalone server, `tracd`.
 * TracCgi if you use the CGI or FastCGI methods.
 * [wiki:TracModWSGI TracModWSGI] if you use the mod_wsgi method.
 * TracModPython if you use the mod_python method.

== Using Trac ==

Once you have your Trac site up and running, you should be able to browse your subversion repository, create tickets, view the timeline, etc.

Keep in mind that anonymous (not logged in) users can by default access most but not all of the features. You will need to configure authentication and grant additional [wiki:TracPermissions permissions] to authenticated users to see the full set of features.

'' Enjoy! ''

[trac:wiki:TracTeam The Trac Team]

----
See also:  TracGuide, TracCgi, TracFastCgi, TracModPython, [wiki:TracModWSGI], TracUpgrade, TracPermissions
