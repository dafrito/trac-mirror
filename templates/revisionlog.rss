<?xml version="1.0"?>
<rss version="2.0" xmlns:py="http://genshi.edgewall.org/">
  <channel py:with="log_href = abs_href.log(path, rev=rev)">
    <title>Revisions of $path</title>
    <link>$log_href</link>
    <description>Trac Log - Revisions of $path</description>
    <language>en-US</language>
    <generator>Trac ${trac.version}</generator>
    <image py:if="chrome.logo">
      <title>${project.name}</title>
      <url>${chrome.logo.src}</url>
      <link>$log_href</link>
    </image>

    <item py:for="item in items" py:with="change = changes[item.rev]; item_context = context('changeset', change.rev, abs_urls=True)">
      <author py:if="change.author" py:with="a = change.author">${a and '@' in a and a or email_map.get(a)}</author>
      <pubDate>${http_date(change.date)}</pubDate>
      <title>Revision $item.rev: ${shorten_line(change.message)}</title>
      <link>${abs_href.changeset(rev, path)}</link>
      <guid isPermaLink="false">${abs_href.changeset(item.rev, item.path)}</guid>
      <description py:with="m = change.message">${
        unicode(wiki_format_messages and (verbose and item_context.wiki_to_html(m) \
                                                   or item_context.wiki_to_oneliner(m)) \
                                       or m)
        }</description>
      <category>Log</category>
    </item>

 </channel>
</rss>
